import{e as K,u as N,f as X,g as Z,j as EE,t as eE,h as AE,i as L,k as F,l as E,m as aE,w as tE,s as BE,R as I,n as lE,p as sE,q as rE,v as iE,x as oE,y as $,z as M,A as uE,B as cE,C as nE,D as CE,L as hE,E as vE,F as mE,G as dE,H as U,I as yE,J as p}from"./app-D-kJX3xZ.js";const DE=["/ProjectInfo.html","/","/B%E7%AB%99%E5%B0%8F%E6%BC%AB%E7%94%BB%E5%90%88%E9%9B%86/","/%E5%BB%BA%E7%AB%99%E6%9D%82%E8%AE%B0/","/%E6%97%85%E8%A1%8C%E6%97%A5%E8%AE%B0/","/%E6%97%85%E8%A1%8C%E6%97%A5%E8%AE%B0/%E6%97%A5%E6%BC%AB%E5%9C%A3%E5%9C%B0%E5%B7%A1%E7%A4%BC01.html","/%E6%97%85%E8%A1%8C%E6%97%A5%E8%AE%B0/%E6%97%A5%E6%BC%AB%E5%9C%A3%E5%9C%B0%E5%B7%A1%E7%A4%BC02.html","/%E6%97%85%E8%A1%8C%E6%97%A5%E8%AE%B0/%E6%97%A5%E6%BC%AB%E5%9C%A3%E5%9C%B0%E5%B7%A1%E7%A4%BC03.html","/%E6%97%85%E8%A1%8C%E6%97%A5%E8%AE%B0/%E6%97%A5%E6%BC%AB%E5%9C%A3%E5%9C%B0%E5%B7%A1%E7%A4%BC04.html","/%E6%97%85%E8%A1%8C%E6%97%A5%E8%AE%B0/%E6%97%A5%E6%BC%AB%E5%9C%A3%E5%9C%B0%E5%B7%A1%E7%A4%BC05.html","/%E6%97%85%E8%A1%8C%E6%97%A5%E8%AE%B0/%E6%97%A5%E6%BC%AB%E5%9C%A3%E5%9C%B0%E5%B7%A1%E7%A4%BC06.html","/%E6%9C%9D%E9%98%B3%E7%AC%94%E8%AE%B0/","/%E6%9C%9D%E9%98%B3%E7%AC%94%E8%AE%B0/%E4%B8%80%E9%94%AE%E5%8A%A0%E9%80%9F%EF%BC%8C%E8%AE%A9%E4%BD%A0%E7%9A%84Windows%E6%9C%BA%E6%A2%B0%E7%A1%AC%E7%9B%98%E4%BC%A0%E8%BE%93%E9%80%9F%E5%BA%A6%E9%A3%9E%E8%B5%B7%E6%9D%A5!.html","/%E6%9C%9D%E9%98%B3%E7%AC%94%E8%AE%B0/%E5%A6%82%E4%BD%95%E5%88%B6%E4%BD%9C%E8%9C%82%E8%9C%9C%E6%9F%A0%E6%AA%AC%E8%8C%B6.html","/%E6%9C%9D%E9%98%B3%E7%AC%94%E8%AE%B0/%E5%A6%82%E4%BD%95%E7%A7%8D%E4%B8%80%E6%A3%B5%E6%9F%A0%E6%AA%AC%E6%A0%91.html","/%E6%9C%9D%E9%98%B3%E7%AC%94%E8%AE%B0/%E5%A6%82%E4%BD%95%E8%8E%B7%E5%8F%96%E4%BC%98%E8%B4%A8%E8%9C%82%E8%9C%9C.html","/%E6%9C%9D%E9%98%B3%E7%AC%94%E8%AE%B0/%E6%A0%A1%E5%9B%AD%E6%8A%80%E6%9C%AF%E8%BF%90%E7%BB%B4%E5%B8%B8%E8%A7%81%E5%AF%B9%E8%AF%9D%E7%94%A8%E8%AF%AD.html","/%E6%9C%9D%E9%98%B3%E7%AC%94%E8%AE%B0/%E7%94%B5%E4%BF%A1%E8%A1%8C%E4%B8%9A%E9%9D%A2%E8%AF%95%E9%97%AE%E9%A2%98%E5%87%86%E5%A4%87.html","/%E6%9C%9D%E9%98%B3%E7%AC%94%E8%AE%B0/%E7%94%B5%E4%BF%A1%E8%A1%8C%E4%B8%9A%E9%9D%A2%E8%AF%95%E9%97%AE%E9%A2%98%E5%8F%82%E8%80%83%E5%9B%9E%E7%AD%94.html","/%E6%9C%9D%E9%98%B3%E7%AC%94%E8%AE%B0/%E7%AE%80%E5%8E%86%E4%B8%AD%E7%9A%84%E4%B8%AA%E4%BA%BA%E4%BC%98%E5%8A%BF%E5%A6%82%E4%BD%95%E6%92%B0%E5%86%99.html","/%E6%9C%9D%E9%98%B3%E7%AC%94%E8%AE%B0/%E7%AE%80%E5%8E%86%E4%B8%AD%E7%9A%84%E5%AE%9E%E4%B9%A0%E7%BB%8F%E5%8E%86%E5%A6%82%E4%BD%95%E6%92%B0%E5%86%99.html","/%E6%9C%9D%E9%98%B3%E7%AC%94%E8%AE%B0/%E7%AE%80%E5%8E%86%E4%B8%AD%E7%9A%84%E6%95%99%E8%82%B2%E7%BB%8F%E5%8E%86%E5%A6%82%E4%BD%95%E6%92%B0%E5%86%99.html","/%E6%9C%9D%E9%98%B3%E7%AC%94%E8%AE%B0/%E8%BF%90%E7%BB%B4%E5%BA%94%E5%B1%8A%E7%94%9F%E9%9D%A2%E8%AF%95%E9%97%AE%E9%A2%98%E5%87%86%E5%A4%87.html","/%E6%9C%9D%E9%98%B3%E7%AC%94%E8%AE%B0/%E9%9D%A2%E8%AF%95%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%A0%87%E5%87%86%E8%A7%A3%E7%AD%94%E7%A4%BA%E4%BE%8B.html","/%E6%9C%9D%E9%98%B3%E7%AC%94%E8%AE%B0/%E9%9D%A2%E8%AF%95%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E8%A7%A3%E7%AD%94(1).html","/%E6%9C%9D%E9%98%B3%E7%AC%94%E8%AE%B0/%E9%9D%A2%E8%AF%95%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E8%A7%A3%E7%AD%94(2).html","/%E6%9C%9D%E9%98%B3%E7%AC%94%E8%AE%B0/%E9%9D%A2%E8%AF%95%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E8%A7%A3%E7%AD%94(3).html","/%E7%BC%96%E7%A8%8B%E7%9B%B8%E5%85%B3/GitSubmodule%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97.html","/%E7%BC%96%E7%A8%8B%E7%9B%B8%E5%85%B3/Linux%E7%B3%BB%E7%BB%9FTar%E6%89%93%E5%8C%85%E7%9B%AE%E5%BD%95.html","/%E7%BC%96%E7%A8%8B%E7%9B%B8%E5%85%B3/Linux%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84cgroups%E7%9A%84%E4%BA%86%E8%A7%A3%E4%B8%8E%E5%BA%94%E7%94%A8.html","/%E7%BC%96%E7%A8%8B%E7%9B%B8%E5%85%B3/MySQL%E4%BD%BF%E7%94%A8UUID%E5%87%BD%E6%95%B0%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90uuid%E5%B9%B6%E6%8F%92%E5%85%A5%E6%8C%87%E5%AE%9A%E5%88%97.html","/%E7%BC%96%E7%A8%8B%E7%9B%B8%E5%85%B3/MySQL%E7%94%9F%E6%88%90%E5%88%97%E8%A1%A8%E5%BA%8F%E5%8F%B7%EF%BC%881%EF%BC%89.html","/%E7%BC%96%E7%A8%8B%E7%9B%B8%E5%85%B3/MySQL%E7%94%9F%E6%88%90%E5%88%97%E8%A1%A8%E5%BA%8F%E5%8F%B7%EF%BC%882%EF%BC%89.html","/%E7%BC%96%E7%A8%8B%E7%9B%B8%E5%85%B3/MySQL%E8%A1%A8%E4%B8%8E%E8%A1%A8%E4%B9%8B%E9%97%B4%E6%95%B0%E6%8D%AE%E7%9A%84%E5%90%8C%E6%AD%A5.html","/%E7%BC%96%E7%A8%8B%E7%9B%B8%E5%85%B3/","/%E7%BC%96%E7%A8%8B%E7%9B%B8%E5%85%B3/Vue2%E8%84%9A%E6%89%8B%E6%9E%B6%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BA.html","/%E9%A1%B9%E7%9B%AE%E6%96%87%E6%A1%A3/","/404.html","/category/","/category/%E7%AE%80%E4%BB%8B/","/category/%E5%B0%8F%E6%BC%AB%E7%94%BB/","/category/%E6%8C%87%E5%8D%97/","/category/anime/","/category/%E7%94%B5%E8%84%91%E4%BC%98%E5%8C%96/","/category/%E8%87%AA%E5%88%B6%E8%8C%B6%E9%A5%AE/","/category/%E9%9D%A2%E8%AF%95/","/category/linux/","/category/%E7%BC%96%E7%A8%8B%E5%AD%A6%E4%B9%A0/","/category/%E7%94%B5%E8%84%91%E6%8A%80%E6%9C%AF/","/tag/","/tag/%E9%A1%B9%E7%9B%AE/","/tag/%E7%AE%80%E4%BB%8B/","/tag/%E5%B0%8F%E6%BC%AB%E7%94%BB/","/tag/%E7%9B%AE%E5%BD%95/","/tag/%E7%B4%A2%E5%BC%95/","/tag/%E6%97%A5%E6%9C%AC%E5%8A%A8%E6%BC%AB/","/tag/%E5%9C%A3%E5%9C%B0%E5%B7%A1%E7%A4%BC/","/tag/%E7%A1%AC%E7%9B%98%E4%BC%98%E5%8C%96/","/tag/%E4%BC%A0%E8%BE%93%E9%80%9F%E5%BA%A6%E4%BC%98%E5%8C%96/","/tag/%E7%94%B5%E8%84%91%E6%8A%80%E6%9C%AF/","/tag/%E8%9C%82%E8%9C%9C%E6%9F%A0%E6%AA%AC%E8%8C%B6/","/tag/%E7%A7%8D%E6%A4%8D%E6%8A%80%E6%9C%AF/","/tag/%E8%87%AA%E5%88%B6%E8%8C%B6%E9%A5%AE/","/tag/%E6%9F%A0%E6%AA%AC%E6%A0%91/","/tag/%E8%9C%82%E8%9C%9C%E8%8E%B7%E5%8F%96/","/tag/%E9%9D%A2%E8%AF%95/","/tag/%E9%9D%A2%E8%AF%95%E9%97%AE%E9%A2%98/","/tag/%E9%9D%A2%E8%AF%95%E5%87%86%E5%A4%87/","/tag/linux/","/tag/docker/","/tag/cgroups/","/tag/%E7%BC%96%E7%A8%8B%E5%AD%A6%E4%B9%A0/","/tag/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/","/tag/%E8%87%AA%E5%AD%A6%E7%BC%96%E7%A8%8B/","/article/","/star/","/timeline/"],gE="SLIMSEARCH_QUERY_HISTORY",m=U(gE,[]),FE=()=>{const{queryHistoryCount:t}=p;return{enabled:t>0,queryHistories:m,addQueryHistory:r=>{m.value=Array.from(new Set([r,...m.value.slice(0,t-1)]))},removeQueryHistory:r=>{m.value=[...m.value.slice(0,r),...m.value.slice(r+1)]}}},w=t=>DE[t.id]+("anchor"in t?`#${t.anchor}`:""),pE="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:T}=p,d=U(pE,[]),fE=()=>({enabled:T>0,resultHistories:d,addResultHistory:s=>{{const r={link:w(s),display:s.display};"header"in s&&(r.header=s.header),d.value=[r,...d.value.slice(0,T-1)]}},removeResultHistory:s=>{d.value=[...d.value.slice(0,s),...d.value.slice(s+1)]}}),HE=t=>{const{page:s,routeLocale:r}=uE(),f=cE(),B=L(0),y=F(()=>B.value>0),u=nE([]);return CE(()=>{const{search:H,terminate:C}=hE(),D=mE(h=>{const{resultsFilter:x=a=>a,querySplitter:v,suggestionsFilter:R,...l}=f.value;h?(B.value+=1,H(h,r.value,l).then(a=>x(a,h,r.value,s.value)).then(a=>{B.value-=1,u.value=a}).catch(a=>{console.warn(a),B.value-=1,B.value||(u.value=[])})):u.value=[]},p.searchDelay-p.suggestDelay,{maxWait:5e3});vE([t,r],([h])=>D(h.join(" "))),dE(()=>{C()})}),{isSearching:y,results:u}};var QE=K({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(t,{emit:s}){const r=N(),f=X(),B=Z(EE),{addQueryHistory:y,queryHistories:u,removeQueryHistory:H}=FE(),{resultHistories:C,addResultHistory:D,removeResultHistory:h}=fE(),x=eE(t,"queries"),{results:v,isSearching:R}=HE(x),l=AE({isQuery:!0,index:0}),a=L(0),c=L(0),b=F(()=>u.value.length>0||C.value.length>0),Q=F(()=>v.value.length>0),S=F(()=>v.value[a.value]||null),j=()=>{const{isQuery:e,index:A}=l;A===0?(l.isQuery=!e,l.index=e?C.value.length-1:u.value.length-1):l.index=A-1},P=()=>{const{isQuery:e,index:A}=l;A===(e?u.value.length-1:C.value.length-1)?(l.isQuery=!e,l.index=0):l.index=A+1},_=()=>{a.value=a.value>0?a.value-1:v.value.length-1,c.value=S.value.contents.length-1},O=()=>{a.value=a.value<v.value.length-1?a.value+1:0,c.value=0},Y=()=>{c.value<S.value.contents.length-1?c.value+=1:O()},G=()=>{c.value>0?c.value-=1:_()},k=e=>e.map(A=>yE(A)?A:E(A[0],A[1])),V=e=>{if(e.type==="customField"){const A=iE[e.index]||"$content",[n,i=""]=oE(A)?A[f.value].split("$content"):A.split("$content");return e.display.map(o=>E("div",k([n,...o,i])))}return e.display.map(A=>E("div",k(A)))},g=()=>{a.value=0,c.value=0,s("updateQuery",""),s("close")},W=()=>E("div",{class:"slimsearch-records"},E("div",{class:"slimsearch-record"},[E("div",{class:"slimsearch-record-title"},B.value.queryHistory),E("ul",{class:"slimsearch-record-contents",role:"listbox"},u.value.map((e,A)=>{const n=l.isQuery&&l.index===A;return E("li",{class:["slimsearch-record-matches",{active:n}],role:"option","aria-selected":n,onClick:()=>{s("updateQuery",e)}},E("div",[E($,{class:"slimsearch-record-type"}),E("div",{class:"slimsearch-record-content"},e),E("button",{type:"button",class:"slimsearch-remove-icon",title:B.value.remove,"aria-label":B.value.remove,innerHTML:M,onClick:i=>{i.preventDefault(),i.stopPropagation(),H(A)}})]))}))])),z=()=>E("ul",{class:"slimsearch-records"},E("li",{class:"slimsearch-record"},[E("div",{class:"slimsearch-record-title"},B.value.resultHistory),E("ul",{class:"slimsearch-record-contents",role:"listbox"},C.value.map((e,A)=>{const n=!l.isQuery&&l.index===A;return E("li",{class:["slimsearch-record-matches",{active:n}],role:"option","aria-selected":n},E(I,{to:e.link,onClick:()=>{g()}},()=>[E($,{class:"slimsearch-record-type"}),E("div",{class:"slimsearch-record-content"},[e.header?E("div",{class:"slimsearch-record-content-header"},e.header):null,E("div",e.display.map(i=>k(i)).flat())]),E("button",{type:"button",class:"slimsearch-remove-icon",title:B.value.remove,"aria-label":B.value.remove,innerHTML:M,onClick:i=>{i.preventDefault(),i.stopPropagation(),h(A)}})]))}))]));return aE("keydown",e=>{if(t.isFocusing){if(Q.value){if(e.key==="ArrowUp")G();else if(e.key==="ArrowDown")Y();else if(e.key==="Enter"){const A=S.value.contents[c.value];y(t.queries.join(" ")),D(A),r.push(w(A)),g()}}else if(e.key==="ArrowUp")j();else if(e.key==="ArrowDown")P();else if(e.key==="Enter"){const{index:A}=l;l.isQuery?(e.preventDefault(),s("updateQuery",u.value[A])):(r.push(C.value[A].link),g())}}}),tE([a,c],()=>{document.querySelector(".slimsearch-record.active .slimsearch-record-matches.active")?.scrollIntoView(!1)},{flush:"post"}),()=>E("div",{id:"slimsearch-results",class:["slimsearch-result-wrapper",{empty:t.queries.length?!Q.value:!b.value}]},t.queries.length?R.value?E(BE,{hint:B.value.searching}):Q.value?E("div",{class:"slimsearch-records",role:"listbox","aria-labeledby":"slimsearch-label"},v.value.map(({title:e,contents:A},n)=>{const i=a.value===n;return E("div",{class:["slimsearch-record",{active:i}],role:"group","aria-selected":i},[E("div",{class:"slimsearch-record-title"},e||B.value.defaultTitle),E("ul",{class:"slimsearch-record-contents"},A.map((o,J)=>{const q=i&&c.value===J;return E("li",{class:["slimsearch-record-matches",{active:q}],role:"option","aria-selected":q},E(I,{to:w(o),onClick:()=>{y(t.queries.join(" ")),D(o),g()}},()=>[o.type==="text"?null:E(o.type==="title"?lE:o.type==="heading"?sE:rE,{class:"slimsearch-record-type"}),E("div",{class:"slimsearch-record-content"},[o.type==="text"&&o.header?E("div",{class:"slimsearch-record-content-header"},o.header):null,E("div",V(o))])]))}))])})):B.value.emptyResult:b.value?[W(),z()]:B.value.emptyHistory)}});export{QE as default};
